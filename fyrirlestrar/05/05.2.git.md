---
title: Fyrirlestur 5.2 ‚Äî Git
---

# Fyrirlestur 5.2 ‚Äì Git

## Vefforritun 1 ‚Äî T√ñL107G

### Andri Valur Gu√∞johnsen, [avg4@hi.is](mailto:avg4@hi.is)

---

## Pro Git

√ûessi yfirfer√∞ byggir √° k√∂flum 1, 2, 3, 6 og 7 √≠ [Pro Git](https://git-scm.com/book/en/v2) eftir Scott Chacon og Ben Staub

---

## Version control

* Geymum √∫tg√°fur af skr√°m sem vi√∞ vinnum me√∞
* Leyfir okkur a√∞:
  - Treysta √æv√≠ a√∞ vinnan okkar s√© √∂rugg
  - Fara fram og til baka √≠ t√≠ma
  - Gera tilraunir √°n √æess a√∞ skemma allt

***

* H√∂fum m√∂rg ‚Äû√∫tf√¶rt‚Äú okkar eigin version control
  - `/backup-sept-2018`
  - `ritgerd-v2.doc`
  - `ritgerd-FINAL.doc`
  - `ritgerd-FINAL-v2.doc`
  - `ritgerd-FINAL-FINAL.doc`

***

![Local version control](img/local.png "Mynd: https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control")

***

## Centralized version control

* Ef vi√∞ erum a√∞ vinna me√∞ √∂√∞rum √æurfum vi√∞ a√∞ deila k√≥√∞a
* Version control me√∞ sameiginlegri, mi√∞l√¶gri geymslu
  - T.d. Subversion, CVS, TFS
* Sendum ekki skr√°r √° milli! Notum mi√∞l√¶ga gagnagrunninn
  - Geymir alla s√∂guna og allar √∫tg√°fur af k√≥√∞a

***

![Centralized version control](img/centralized.png "Mynd: https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control")

***

## Distributed version control

* H√∂fum mi√∞l√¶ga geymslu en hver client hefur einnig _√∂ll g√∂gn_
  - T.d. Git, Mercurial
* Ef eitthva√∞ fer √∫rskei√∞is getum vi√∞ haldi√∞ √°fram a√∞ vinna

***

![ Distributed version control](img/distributed.png "Mynd: https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control")

***

## Repo

* Mi√∞l√¶ga geymslan heitir √° ensku _repository_
* Oftast kalla√∞ _repo_ e√∞a _git repo_

---

## Git

* Upprunalega b√∫i√∞ til af Linus Torvald fyrir Linux kernel
* Markmi√∞:
  - Hra√∞i
  - Einfaldleiki
  - √ìl√≠nuleg √ær√≥un
  - Dreift

***

* Git geymir skr√°r og st√∂√∞u verkefnis sem ‚Äûsnapshot‚Äú af skr√°m √° hverjum t√≠mapunkti
* Ef skr√° hefur ekki breyst er v√≠sa√∞ √≠ fyrri √∫tg√°fu
* Virkar l√≠kt og skr√°arkerfi

***

![Git snapshots](img/snapshots.png "Mynd: https://git-scm.com/book/en/v2/Getting-Started-Git-Basics")

***

## Git er sta√∞bundi√∞ (local)

* √ûar sem vi√∞ geymum allt repo √° client getum vi√∞ gert flest √°n tengingar vi√∞ server
  - Mj√∂g hratt
* Getum unni√∞ og b√¶tt vi√∞ repo ef vi√∞ erum √°n nets

***

## Git byggir √° heilleika

* Allt √≠ Git hefur tj√©kksummu (checksum) bygg√∞a √° SHA-1
  - `24b9da6552252987aa493b52f8696cd6d3b00373`
* H√©rumbil √≥m√∂gulegt a√∞ tapa nokkrum uppl√Ωsingum e√∞a a√∞ skjal spillist √°n √æess a√∞ Git viti

***

## Git b√¶tir yfirleitt bara vi√∞

* Flestar a√∞ger√∞ir √≠ Git _b√¶ta bara vi√∞_, engu er eytt
* Um lei√∞ og vi√∞ h√∂fum _commita√∞_ √≠ Git er mj√∂g erfitt a√∞ tapa √æv√≠
  - Committum snemma og oft!
* Einfalt a√∞ gera tilraunir og pr√≥fa sig √°fram

***

## √ûrj√°r st√∂√∞ur skr√°ar √≠ Git

* **committed**, skr√° er geymd √≠ local gagnagrunni Git
* **modified**, skr√° hefur veri√∞ breytt en ekki geymd √≠ gagnagrunni
* **staged**, breytt skr√° hefur veri√∞ merkt til a√∞ fara √≠ n√¶sta commit

***

## √ûrj√∫ sv√¶√∞i verkefnis √≠ Git

* **.git directory** (repo), √æar sem local repo er geymt
* **staging area**, skr√° √≠ repo sem geymir hva√∞a skr√°r ver√∞i n√¶st commita√∞ar
* **working directory**, stakt _checkout_ af √°kve√∞inni √∫tg√°fu √∫r Git, √≠ m√∂ppu √æar sem vi√∞ getum breytt √æeim

***

![Sv√¶√∞i verkefna √≠ git](img/areas.png "Mynd: https://git-scm.com/book/en/v2/Getting-Started-Git-Basics")

***

## Git verkfl√¶√∞i

1. Breyta skr√°m √≠ _working directory_
2. _Stagea_ skr√°m √° _staging area_
3. _Commita_, f√¶ra skr√°r √∫r _staging area_ √≠ Git repo

---

## Git og CLI

* H√∂fum a√∞gang a√∞ √∂llum a√∞ger√∞um Git √≠ gegnum CLI
  - Gott og sl√¶mt, √æa√∞ er miki√∞ af a√∞ger√∞um til
* H√¶gt a√∞ s√¶kja GUI t√≥l, en...
  - Mikilv√¶gt a√∞ vita hvernig grunnheg√∞un Git er _√°n_ √æess a√∞ treysta √° t√≥l

***

## Uppsetning √° Git

* S√¶kja
  - [Linux og Unix](https://git-scm.com/download/linux)
  - [Mac](https://git-scm.com/download/mac)
  - [Windows](https://git-scm.com/download/win)
* [Fylgja lei√∞beiningum](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)

---

## B√∫a til Git repo

* Opnum terminal og f√∂rum √≠ m√∂ppu sem geymir/mun geyma verkefni
* `cd /verkefni/verkefni√∞-okkar/`
* `git init`
  - B√Ωr til `/.git` m√∂ppu me√∞ repo

***

## S√¶kja Git repo sem er til

* F√∂rum √≠ m√∂ppu sem mun innihalda verkefni
* `cd /verkefni/`
* `git clone <sl√≥√∞ √° repo>`
  - _clone_ af √∂llu repo
* B√Ωr til `/verkefni/<heiti verkefnis>` me√∞ skr√°m og `/.git`

***

## Git og skr√°r √≠ verkefni

* Git s√©r skr√°r √° ferna vegu:
  - _unmodified_, engar breytingar √° skr√° s√≠√∞an seinasta commit
  - _modified_, breytingar √° skr√° s√≠√∞an seinasta commit, ekki _staged_
  - _staged_, breytingar √° skr√° og staged
  - _untracked_, allar a√∞rar

***

![Git lifecycle](img/lifecycle.png "Mynd: https://git-scm.com/book/en/v2/Git-Basics-Recording-Changes-to-the-Repository")

***

## Git skipanir og skr√°r

* `git status` l√¶tur okkur vita af st√∂√∞u skr√°a
* `git add <skr√°>` f√¶ra skr√° fr√° _untracked_ e√∞a _modified_ √≠ _staged_
* `git diff` l√¶tur vita af breytingum
  - `git diff <skr√°>` fyrir √°kve√∞na skr√°
  - `git diff --staged` fyrir allar skr√°r sem eru _staged_

***

## .gitignore

`.gitignore` er s√©rst√∂k skr√° sem inniheldur lista af skr√°m og m√∂ppum sem Git l√¶tur vera

```text
# athugasemd

# ekki geyma node_modules m√∂ppu √≠ git
node_modules/

# ekki geyma "style.css" sem vi√∞
# √æ√Ω√∞um fr√° "styles.scss"
style.css
```

***

## git commit

* `git commit` f√¶rir allt √∫r _staged_ √≠ commit sem geymt er √≠ Git
* Gefum upp _commit message_ sem segir hva√∞ breytist me√∞ commit, opnar textaritil
* Getum gert √≠ einu me√∞
  - `git commit -m "<commit message>"`

***

## Commit message

* √ûegar vi√∞ vinnum √≠ version control getur veri√∞ erfitt a√∞ skrifa commit message
  - ‚Äûvann √≠ einhverju‚Äú
  - ‚Äûüí©‚Äú
* A√∞ vinna √≠ einum hlut √≠ einum og commita √° eftir getur hj√°lpa√∞

***

* "If I apply this commit, it will?"
  - "Add new function for foo"
  - "Refactor how we handle bar"

***

## Fjarl√¶gja og f√¶ra

* Getum fjarl√¶gt skr√° me√∞ `git rm <skr√°>`
* Getum f√¶rt me√∞ `git mv <skr√°> <n√Ωr-sta√∞ur>`

***

## Git saga

* `git log` gefur okkur lista af commitum
  - seinustu √≠ √∂fugri t√≠mar√∂√∞
* Miki√∞ af breytum til a√∞ stilla hva√∞ vi√∞ sj√°um
  - t.d. `git log -p -2`, seinustu tv√∂ commit me√∞ skr√°m
  - [2.3 Git Basics - Viewing the Commit History](https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History)

***

## Taka til baka e√∞a breyta √≠ Git

* Vi√∞ gerum oft mist√∂k √æegar vi√∞ vinnum me√∞ Git
* H√∂fum lei√∞ir til a√∞ lei√∞r√©tta en √æurfum a√∞ passa a√∞ skemma ekki
* G√¶tum tapa√∞ vinnu ef vi√∞ erum ekki vark√°r

***

## B√¶ta vi√∞ commit

Ef vi√∞ gleymum skr√° √≠ commiti getum vi√∞ b√¶tt vi√∞ og nota√∞ _amend_ til a√∞ b√¶ta vi√∞:

```bash
> git commit -m "Initial commit"
> git add gleymdist.txt
> git commit --amend
```

***

## Fjarl√¶gja √∫r _staged_

* Notum `git reset` til a√∞ fjarl√¶gja √∫r _staged_ me√∞ `HEAD`
* `HEAD` bendir √° seinasta commit √° √æv√≠ _branch_ sem vi√∞ erum √°

```bash
> git add foo.txt
> git reset HEAD foo.txt
```

***

## Fjarl√¶gja breytingar

Ef vi√∞ viljum h√¶tta vi√∞ allar breytingar √≠ skjali getum vi√∞ nota√∞ `git checkout -- <skr√°>`

```bash
> git checkout -- foo.txt
```

Vi√∞ **missum allar breytingar** s√≠√∞an seinasta commit me√∞ √æessari skipun
